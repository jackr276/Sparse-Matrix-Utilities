# Sparse Matrix Utilities
Author: [Jack Robbins](https://www.github.com/jackr276)
 
This project provides 3 C programs that are designed to generate, print and convert binary files containing sequences of 4-byte integers. The binary files are treated as sparse matrices, that is, matrices who contain at least 50% zeroes, making them truly sparse. A full description of each of these utilities, and of sparse matrices in general, is given below.

## What is a Sparse Matrix?
A sparse matrix is a matrix whose contents are at least 50% 0's. Here is a small 5 X 5 example:
  |0 | 1 | 0 | 0 | 0 |
  |-----|-----|-----|-----|------|
  |**0**|**0**|**2**|**0**|**1**|
  |**0**|**4**|**0**|**0**|**0**|
  |**12**|**0**|**0**|**0**|**0**|
  |**3**|**0**|**0**|**0**|**0**|

Notice how we only have 6 nonzero values(1, 2, 3, 4 and 12) out of 25 total values, making this matrix truly sparse.

Unlike this small 5 X 5 example, these matrices are often quite large, and therefore storing them efficiently in memory/on disk provides an interesting challenge to solve. Consider a sparse matrix of unsigned integers that is 1000 rows by 1000 columns. If we know that this matrix is sparse, we know that out of the $1,000 * 1,000 = 1,000,000$ elements in the matrix, at least 50% of them, $500,000$, will be 0's. If we were to store all of these 0's in memory, we are guaranteed, in our example, to be storing at least $500,000 * 4$ Bytes/Unisgned Integer = $2,000,000$ Bytes = $2$ MegaBytes(MB) of 0's in memory, or in a file somewhere, a gross waste of resources. Remember, this is the **best case** scenario, as we guarantee that the matrix is **at least** 50% 0's, so in all likelihood we would be wasting more than $2$ MB's of memory. The problem of efficient storage is addressed below in the CSR Format conversion section.

Sparse matrices appear in several distinct areas of science and mathematics. Machine learning, combinatorics and numerical analysis are a few examples of where the concept of sparse matrices appear.

## Generating Sparse Matrices
The C program [generate_sparse_mat.c](https://github.com/jackr276/Sparse-Matrix-Utilities/blob/main/src/create_sparse_mat.c) allows users to generate a sparse matrix of any dimension that they choose. The number of rows and columns is provided as user-input to this program upon runtime(see more about running these programs below). Once a user enters the desired dimensions, the program creates a binary file, `matrix.bin`, in the current directory. This program guarantees that all binary files generated will be at least 50% zeroes, so that when they are interpreted as sparse matrices, they are truly sparse.

Binary files generated by **generate_sparse_mat.c** follow these conventions:
1. The first 4 bytes of the file are the number of rows the user has entered, and the second 4 bytes are the number of columns, making the first 8 bytes of the file the dimensions of the sparse matrix, and not actual values in the sparse matrix.
2. The program will write **row * column** randomly generated unsigned integers to the file after writing the dimensions in the first 8 bytes. The program was written with unsigned integers in mind, but users could easily choose to interpret each of these 4-byte values as signed integers, floats, etc.
3. The file created will always be entitled `matrix.bin`. If no file titled `matrix.bin` in the current directory exists, one will be created. Otherwise, the current `matrix.bin` file will be **overwritten**.

Additionally, it is possible to modify the source code to change the density of the sparse matrices that are generated. The constant `RATIO` at the top of the file may be changed to any number between 0 and 1 to adjust how dense/sparse the matrix is. The closer `RATIO` is to 1, the more dense the matrix will be. `RATIO` is set by default to 0.2, which is a safe defualt if users would like a truly sparse matrix.

## Displaying Contents of Binary Files

## Converting Sparse Matrices into Compressed Sparse Row(CSR) Format

## Running these programs
For convenience, a runner script [run.sh](https://github.com/jackr276/Sparse-Matrix-Utilities/blob/main/src/run.sh) has been provided that will compile, take input, and run all of the programs in this project. Some examples of how to use it are below.

>[!NOTE]
>After downloading run.sh, be sure to grant executable permissions by running `chmod +x run.sh`

To generate a 5X5 sparse matrix:
```console
example@bash:~$ ./run.sh create_sparse_mat.c
If your program requires input, enter it here: 5 5
```

To display the contents of the file `matrix.bin` in the current directory
```console
example@bash:~$ ./run.sh display_contents.c
If your program requires input, enter it here: matrix.bin
```

To convert the binary file in `matrix.bin` into compressed sparse row format
```console
example@bash:~$ ./run.sh convert_to_csr.c
If your program requires input, enter it here: matrix.bin
```
